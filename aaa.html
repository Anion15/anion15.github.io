<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>..</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 20px;
    }
    .color-box {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }
    .color-swatch {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: white;
      text-shadow: 0 0 3px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
  <h2>메인 컬러를 선택하세요:</h2>
  <input type="color" id="mainColor" value="#202020" />
  <button onclick="updateColors()">색상 계산</button>

  <div class="color-box">
    <div class="color-swatch" id="mainSwatch">메인</div>
    <div class="color-swatch" id="bg1Swatch">배경1</div>
    <div class="color-swatch" id="bg2Swatch">배경2</div>
  </div>

  <script>
    function hexToRgb(hex) {
      const bigint = parseInt(hex.slice(1), 16);
      const r = (bigint >> 16) & 255;
      const g = (bigint >> 8) & 255;
      const b = bigint & 255;
      return { r, g, b };
    }

    function rgbToHsl(r, g, b) {
      r /= 255; g /= 255; b /= 255;
      const max = Math.max(r, g, b), min = Math.min(r, g, b);
      let h, s, l = (max + min) / 2;

      if (max === min) {
        h = s = 0; // 회색
      } else {
        const d = max - min;
        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
        switch (max) {
          case r: h = (g - b) / d + (g < b ? 6 : 0); break;
          case g: h = (b - r) / d + 2; break;
          case b: h = (r - g) / d + 4; break;
        }
        h /= 6;
      }
      return { h: h * 360, s: s * 100, l: l * 100 };
    }

    function hslToHex(h, s, l) {
      s /= 100;
      l /= 100;

      const c = (1 - Math.abs(2 * l - 1)) * s;
      const x = c * (1 - Math.abs((h / 60) % 2 - 1));
      const m = l - c / 2;
      let r, g, b;

      if (h < 60) { r = c; g = x; b = 0; }
      else if (h < 120) { r = x; g = c; b = 0; }
      else if (h < 180) { r = 0; g = c; b = x; }
      else if (h < 240) { r = 0; g = x; b = c; }
      else if (h < 300) { r = x; g = 0; b = c; }
      else { r = c; g = 0; b = x; }

      r = Math.round((r + m) * 255);
      g = Math.round((g + m) * 255);
      b = Math.round((b + m) * 255);

      return `#${((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase()}`;
    }

    function getTextColorFromHex(hex) {
      const { r, g, b } = hexToRgb(hex);
      const brightness = 0.299 * r + 0.587 * g + 0.114 * b;
      return brightness > 186 ? '#000' : '#FFF';
    }

    function updateColors() {
      const mainHex = document.getElementById("mainColor").value;
      const { r, g, b } = hexToRgb(mainHex);
      const hsl = rgbToHsl(r, g, b);

      const bg1 = hslToHex(hsl.h, hsl.s, Math.min(hsl.l + 35, 95));
      const bg2 = hslToHex(hsl.h, hsl.s, Math.min(hsl.l + 20, 90));

      const mainSwatch = document.getElementById("mainSwatch");
      mainSwatch.style.backgroundColor = mainHex;
      mainSwatch.style.color = getTextColorFromHex(mainHex);
      mainSwatch.textContent = "메인";

      const bg1Swatch = document.getElementById("bg1Swatch");
      bg1Swatch.style.backgroundColor = bg1;
      bg1Swatch.style.color = getTextColorFromHex(bg1);
      bg1Swatch.textContent = "배경1";

      const bg2Swatch = document.getElementById("bg2Swatch");
      bg2Swatch.style.backgroundColor = bg2;
      bg2Swatch.style.color = getTextColorFromHex(bg2);
      bg2Swatch.textContent = "배경2";
    }

    updateColors();
  </script>
</body>
</html>
